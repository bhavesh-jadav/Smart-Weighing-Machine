!function(){"use strict";function t(t,s){t.isBusyChart2=!0,t.isBusyChart1=!0,s.get("/api/user_dates").then(function(a){n=a.data;for(var r=0;r<n.length;r++){var u=new Date(n[r]);o.push(c[u.getMonth()]+" "+u.getFullYear())}if(t.monthLabels=o,n.length>=i)var d=n.length-i;else var d=0;var p=n.length;if(t.chart1StartDate=o[d],t.chart1EndDate=o[p-1],n.length>=h)var d=n.length-h;else var d=0;var p=n.length;t.chart2StartDate=o[d],t.chart2EndDate=o[p-1],s.get("/api/product_info").then(function(a){e(a.data),t.products=l,t.chart2ProductName=l[0],t.displayChart2()},function(a){t.chart2Error="Unable to display chart",t.isBusyChart2=!1}),t.displayChart1()},function(a){t.chart1Error="Unable to display chart",t.isBusyChart1=t.isBusyChart2=!1}),t.displayChart1=function(){if(t.chart1StartDate==t.chart1EndDate)return t.chart1Error="Start month and end month must not have same value";for(var r,e,l=0;l<o.length;l++)o[l]===t.chart1StartDate?e=l:o[l]===t.chart1EndDate&&(r=l);if(e>r)return t.chart1Error="Start month must come before end month";t.isBusyChart1=!0;for(var h,i,l=0;l<n.length;l++)o[l]==t.chart1StartDate&&(h=new Date(n[l])),o[l]==t.chart1EndDate&&(i=new Date(n[l]));s.get("/api/product_info_month_wise/"+(h.getMonth()+1)+"/"+h.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()).then(function(r){t.isBusyChart1=!1,t.chart1Error=a(t.chart1StartDate,t.chart1EndDate,r.data)},function(a){t.isBusyChart1=!1,t.chart1Error="Unable to display chart"})},t.displayChart2=function(){if(t.chart2StartDate==t.chart2EndDate)return t.chart2Error="Start month and end month must not have same value";for(var a,e,l=0;l<o.length;l++)o[l]===t.chart2StartDate?e=l:o[l]===t.chart2EndDate&&(a=l);if(e>a)return t.chart2Error="Start month must come before end month";t.isBusyChart2=!0;for(var h,i,l=0;l<n.length;l++)o[l]==t.chart2StartDate&&(h=new Date(n[l])),o[l]==t.chart2EndDate&&(i=new Date(n[l]));s.get("/api/product_info_month_wise/"+(h.getMonth()+1)+"/"+h.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()).then(function(a){t.isBusyChart2=!1,t.chart2Error=r(t.chart2ProductName,t.chart2StartDate,t.chart2EndDate,a.data)},function(a){t.isBusyChart2=!1,t.chart2Error="Unable to display chart"})}}function a(t,a,r){function e(t){if(Array.isArray(t)){for(var a=0,r=Array(t.length);a<t.length;a++)r[a]=t[a];return r}return Array.from(t)}for(var n,l,h=0;h<o.length;h++)o[h]===t?l=h:o[h]===a&&(n=h);for(var i=function(t){return[].concat(e(new Set(t)))},c=function(t){return[].concat.apply([],t)},s=r.map(function(t){return t.date}),u=i(c(r.map(function(t){return t.productInformation})).map(function(t){return t.productName})),d=u.map(function(t){return{data:s.map(function(a){var e=r.find(function(t){return t.date===a}).productInformation.find(function(a){return a.productName===t});return e?e.totalWeight:0})}}),p=[],h=l;h<=n;h++)p.push(o[h]);for(var g=[],h=0;h<d[0].data.length;h++){for(var f=0,m=0;m<d.length;m++)f+=d[m].data[h];g.push(f)}var y={labels:p,datasets:[{label:"Weight in grams",data:g,backgroundColor:"#ff7272"}]},b={maintainAspectRatio:!1,scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Months"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"},ticks:{beginAtZero:!0}}]},legend:{display:!1},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,a){return t.yLabel<=1e3?t.yLabel+" gm":t.yLabel/1e3+" kg"}},displayColors:!1}};$("#chart1div").empty(),$("#chart1div").append('<canvas id="chart1" style="height:300px;" height="300"></canvas>');var v=document.getElementById("chart1").getContext("2d");new Chart(v,{type:"bar",data:y,options:b});return""}function r(t,a,r,e){for(var n,l,h=0;h<o.length;h++)o[h]===a?l=h:o[h]===r&&(n=h);for(var i=[],h=l;h<=n;h++)i.push(o[h]);for(var c,s=[],h=0;h<e.length;h++){for(c=0;c<e[h].productInformation.length;c++)if(e[h].productInformation[c].productName==t){s.push(e[h].productInformation[c].totalWeight);break}c==e[h].productInformation.length&&s.push(0)}var u=[{label:t,data:s,backgroundColor:"#f7ab40",borderWidth:5,borderColor:"#d68413",cubicInterpolationMode:"monotone"}],d={labels:i,datasets:u},p={maintainAspectRatio:!1,scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Products"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"},ticks:{beginAtZero:!0}}]},legend:{display:!1,labels:{display:!1}},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,a){return t.yLabel<=1e3?t.yLabel+" gm":t.yLabel/1e3+" kg"}},displayColors:!1}};$("#chart2div").empty(),$("#chart2div").append('<canvas id="chart2" style="height:250px;" height="250"></canvas>');var g=document.getElementById("chart2").getContext("2d");new Chart(g,{type:"line",data:d,options:p});return""}function e(t){for(var a=0;a<t.length;a++)l.push(t[a].productName)}var n=[],o=[],l=[],h=10,i=15,c=["January","February","March","April","May","June","July","August","September","October","November","December"];angular.module("public",[]),angular.module("public").controller("chartsController",["$scope","$http",t])}();