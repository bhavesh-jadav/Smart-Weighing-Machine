!function(){"use strict";function t(t,l){t.isBusyChart2=t.isBusyChart1=!0,l.get("/api/user_dates").then(function(a){r=a.data;for(var l=0;l<r.length;l++){var c=new Date(r[l]);e.push(h[c.getMonth()]+" "+c.getFullYear())}if(t.monthLabels=e,r.length>=o)var i=r.length-o;else var i=0;var u=r.length;if(t.chart1StartDate=e[i],t.chart1EndDate=e[u-1],r.length>=n)var i=r.length-n;else var i=0;var u=r.length;t.chart2StartDate=e[i],t.chart2EndDate=e[u-1],t.displayChart1(),t.displayChart2()},function(a){t.chart1Error="Unable to display chart",t.isBusyChart1=t.isBusyChart2=!1}),t.displayChart1=function(){if(t.chart1StartDate==t.chart1EndDate)return t.chart1Error="Start month and end month must not have same value";for(var n,o,h=0;h<e.length;h++)e[h]===t.chart1StartDate?o=h:e[h]===t.chart1EndDate&&(n=h);if(o>n)return t.chart1Error="Start month must come before end month";t.isBusyChart1=!0;for(var c,i,h=0;h<r.length;h++)e[h]==t.chart1StartDate&&(c=new Date(r[h])),e[h]==t.chart1EndDate&&(i=new Date(r[h]));l.get("/api/product_info_month_wise/"+(c.getMonth()+1)+"/"+c.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()).then(function(r){t.isBusyChart1=!1,t.chart1Error=a(t.chart1StartDate,t.chart1EndDate,r.data)},function(a){t.isBusyChart1=!1,t.chart1Error="Unable to display chart"})},t.displayChart2=function(){if(t.chart2StartDate==t.chart2EndDate)return t.chart2Error="Start month and end month must not have same value";for(var a,n,o=0;o<e.length;o++)e[o]===t.chart2StartDate?n=o:e[o]===t.chart2EndDate&&(a=o);if(n>a)return t.chart2Error="Start month must come before end month";t.isBusyChart2=!0;for(var h,l,o=0;o<r.length;o++)e[o]==t.chart2StartDate&&(h=new Date(r[o])),e[o]==t.chart2EndDate&&(l=new Date(r[o]))}}function a(t,a,r){function n(t){if(Array.isArray(t)){for(var a=0,r=Array(t.length);a<t.length;a++)r[a]=t[a];return r}return Array.from(t)}for(var o,h,l=0;l<e.length;l++)e[l]===t?h=l:e[l]===a&&(o=l);for(var c=function(t){return[].concat(n(new Set(t)))},i=function(t){return[].concat.apply([],t)},u=r.map(function(t){return t.date}),s=c(i(r.map(function(t){return t.productInformation})).map(function(t){return t.productName})),d=s.map(function(t){return{data:u.map(function(a){var e=r.find(function(t){return t.date===a}).productInformation.find(function(a){return a.productName===t});return e?e.totalWeight:0})}}),f=[],l=h;l<=o;l++)f.push(e[l]);for(var g=[],l=0;l<d[0].data.length;l++){for(var p=0,m=0;m<d.length;m++)p+=d[m].data[l];g.push(p)}var y={labels:f,datasets:[{label:"Weight in grams",data:g,backgroundColor:"#ff7272"}]},v={maintainAspectRatio:!1,scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Months"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"},ticks:{beginAtZero:!0}}]},legend:{display:!1},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(t,a){return t.yLabel<=1e3?t.yLabel+" gm":t.yLabel/1e3+" kg"}},displayColors:!1}};$("#chart1div").empty(),$("#chart1div").append('<canvas id="chart1" style="height:300px;" height="300"></canvas>');var b=document.getElementById("chart1").getContext("2d");new Chart(b,{type:"bar",data:y,options:v});return""}var r=[],e=[],n=10,o=15,h=["January","February","March","April","May","June","July","August","September","October","November","December"];angular.module("public",[]),angular.module("public").controller("chartsController",["$scope","$http",t])}();