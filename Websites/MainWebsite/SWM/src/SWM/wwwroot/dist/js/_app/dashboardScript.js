function user_dashboard(t){"use strict";function a(a,c){a.isBusyChart1=!0,c.get("/api/"+t+"/product_info").then(function(t){a.data=t.data;for(var r=0;r<a.data.length;r++)d.push(a.data[r]);a.isBusyChart1=!1,o()},function(t){a.chart1Error="Unable to display chart"}),a.isBusyChart2=!0,c.get("/api/"+t+"/product_info_month_wise").then(function(t){a.data=t.data;for(var o=0;o<a.data.length;o++)i.push(a.data[o]);if(i.length>=u)var c=i.length-u;else var c=0;for(var d=i.length,o=0;o<i.length;o++){var f=new Date(i[o].date);h.push(p[f.getMonth()]+" "+f.getFullYear())}l(i),a.products=s,a.chart3ProductName=s[0],a.chart3StartDate=h[c],a.chart3EndDate=h[d-1],a.chart2StartDate=h[c],a.chart2EndDate=h[d-1],a.chart2Dates=h,a.chart4StartDate=h[c],a.chart4EndDate=h[d-1],a.isBusyChart2=!1,a.chart2Error=n(a.chart2StartDate,a.chart2EndDate),a.chart3Error=e(a.chart3ProductName,a.chart3StartDate,a.chart3EndDate),a.chart4Error=r(a.chart4StartDate,a.chart4EndDate)},function(t){a.chart2Error="Unable to display chart"}),a.displayChart2=function(){a.chart2Error=n(a.chart2StartDate,a.chart2EndDate)},a.displayChart3=function(){a.chart3Error=e(a.chart3ProductName,a.chart3StartDate,a.chart3EndDate)},a.displayChart4=function(){a.chart4Error=r(a.chart4StartDate,a.chart4EndDate)}}function r(t,a){function r(t){if(Array.isArray(t)){for(var a=0,r=Array(t.length);a<t.length;a++)r[a]=t[a];return r}return Array.from(t)}if(t==a)return"Start month and end month must not have same value";for(var e,n,o=0;o<h.length;o++)h[o]===t?n=o:h[o]===a&&(e=o);if(n>e)return"Start month must come before end month";for(var c=function(t){return[].concat(r(new Set(t)))},l=function(t){return[].concat.apply([],t)},d=i.map(function(t){return t.date}),s=c(l(i.map(function(t){return t.productInformation})).map(function(t){return t.productName})),u=s.map(function(t){return{data:d.map(function(a){var r=i.find(function(t){return t.date===a}).productInformation.find(function(a){return a.productName===t});return r?r.totalWeight:0}).slice(n,e+1)}}),p=[],o=n;o<=e;o++)p.push(h[o]);console.log(p);for(var f=[],o=0;o<u[0].data.length;o++){for(var m=0,g=0;g<u.length;g++)m+=u[g].data[o];f.push(m)}console.log(f);var y={labels:p,datasets:[{label:"Weight in grams",data:f,backgroundColor:"#ff7272"}]},v={scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Months"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]},legend:{display:!1}};$("#chart4div").empty(),$("#chart4div").append('<canvas id="chart4" style="height: 250px;" height="250" width="787"></canvas>');var b=document.getElementById("chart4").getContext("2d");new Chart(b,{type:"horizontalBar",data:y,options:v});return""}function e(t,a,r){if(a==r)return"Start month and end month must not have same value";for(var e,n,o=0;o<h.length;o++)h[o]===a?n=o:h[o]===r&&(e=o);if(n>e)return"Start month must come before end month";for(var c=[],o=n;o<=e;o++)c.push(h[o]);for(var l,d=[],o=0;o<i.length;o++){for(l=0;l<i[o].productInformation.length;l++)if(i[o].productInformation[l].productName==t){d.push(i[o].productInformation[l].totalWeight);break}l==i[o].productInformation.length&&d.push(0)}d=d.slice(n,e+1);var s=[{label:t,data:d,backgroundColor:"#f7ab40",borderWidth:5,borderColor:"#d68413"}],u={labels:c,datasets:s},p={scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Products"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]},legend:{display:!1,labels:{display:!1}}};$("#chart3div").empty(),$("#chart3div").append('<canvas id="chart3" style="height:250px;" height="250"></canvas>');var f=document.getElementById("chart3").getContext("2d");new Chart(f,{type:"line",data:u,options:p});return""}function n(t,a){function r(t){if(Array.isArray(t)){for(var a=0,r=Array(t.length);a<t.length;a++)r[a]=t[a];return r}return Array.from(t)}if(t==a)return"Start month and end month must not have same value";for(var e,n,o=0;o<h.length;o++)h[o]===t?n=o:h[o]===a&&(e=o);if(n>e)return"Start month must come before end month";for(var l=function(t){return[].concat(r(new Set(t)))},d=function(t){return[].concat.apply([],t)},s=i.map(function(t){return t.date}),u=l(d(i.map(function(t){return t.productInformation})).map(function(t){return t.productName})),p=u.map(function(t){return{label:t,data:s.map(function(a){var r=i.find(function(t){return t.date===a}).productInformation.find(function(a){return a.productName===t});return r?r.totalWeight:0}).slice(n,e+1),backgroundColor:c()}}),f=[],o=n;o<=e;o++)f.push(h[o]);var m={labels:f,datasets:p},g={responsive:!0,legend:{display:!0,position:"top"},scales:{xAxes:[{display:!0,stacked:!0,scaleLabel:{display:!0,labelString:"Months"}}],yAxes:[{display:!0,stacked:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]}};$("#chart2div").empty(),$("#chart2div").append('<canvas id="chart2" style="height:300px;" height="300"></canvas>');var y=document.getElementById("chart2").getContext("2d");new Chart(y,{type:"bar",data:m,options:g});return""}function o(){for(var t=[],a=[],r=0;r<d.length;r++)t.push(d[r].productName),a.push(d[r].totalWeight);var e={labels:t,datasets:[{label:"Weight in grams",data:a,backgroundColor:"#3c8dbc"}]},n={scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Products"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]},legend:{display:!1}},o=document.getElementById("chart1").getContext("2d");new Chart(o,{type:"bar",data:e,options:n})}function c(){for(var t="0123456789ABCDEF",a="#",r=0;r<6;r++)a+=t[Math.floor(16*Math.random())];return a}function l(t){for(var a,r=0,e=0;e<t.length;e++)t[e].productInformation.length>r&&(r=t[e].productInformation.length,a=e);for(var e=0;e<r;e++)s.push(t[a].productInformation[e].productName)}var d=[],i=[],h=[],s=[],u=10,p=["January","February","March","April","May","June","July","August","September","October","November","December"];angular.module("app-dashboard",[]),angular.module("app-dashboard").controller("chartsController",["$scope","$http",a])}