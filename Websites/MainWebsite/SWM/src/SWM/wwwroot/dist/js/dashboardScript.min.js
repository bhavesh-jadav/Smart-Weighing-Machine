function user_dashboard(n){"use strict";function h(o,h){o.isBusyChart1=!0;h.get("/api/"+n+"/product_info").then(function(n){o.data=n.data;for(var t=0;t<o.data.length;t++)r.push(o.data[t]);o.isBusyChart1=!1;c()},function(){o.chart1Error="Unable to display chart"});o.isBusyChart2=!0;h.get("/api/"+n+"/product_info_month_wise").then(function(n){var f,h,r,u;for(o.data=n.data,r=0;r<o.data.length;r++)t.push(o.data[r]);for(f=t.length>=6?t.length-6:0,h=t.length,r=0;r<t.length;r++)u=new Date(t[r].date),i.push(s[u.getMonth()]+" "+u.getFullYear());o.startDate=i[f];o.endDate=i[h-1];o.chart2Dates=i;o.isBusyChart2=!1;o.chart2Error=e(o.startDate,o.endDate)},function(){o.chart2Error="Unable to display chart"});o.displayChart2=function(){u=o.startDate;f=o.endDate;o.chart2Error=e(u,f)}}function e(n,r){var f,e,u,h,c,a;if(n==r)return"Start month and end month must not have same value";for(u=0;u<i.length;u++)i[u]===n?e=u:i[u]===r&&(f=u);if(e>f)return"Start month must come before end date";const v=n=>[...new Set(n)],y=n=>[].concat.apply([],n);var p=t.map(function(n){return n.date}),w=v(y(t.map(function(n){return n.productInformation})).map(function(n){return n.productName})),b=w.map(function(n){return{label:n,data:p.map(function(i){var r=t.find(function(n){return n.date===i}).productInformation.find(function(t){return t.productName===n});return r?r.totalWeight:0}).slice(e,f+1),backgroundColor:l()}}),s=[];for(u=e;u<=f;u++)s.push(i[u]);return h={labels:s,datasets:b},c={responsive:!0,legend:{display:!0,position:"top"},scales:{xAxes:[{display:!0,stacked:!0,scaleLabel:{display:!0,labelString:"Months"}}],yAxes:[{display:!0,stacked:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]}},$("#chart2div").empty(),$("#chart2div").append('<canvas id="chart2" height=400><\/canvas>'),a=document.getElementById("chart2").getContext("2d"),o=new Chart(a,{type:"bar",data:h,options:c}),""}function c(){for(var t=[],i=[],n=0;n<r.length;n++)t.push(r[n].productName),i.push(r[n].totalWeight);var e=$("#chart1").get(0).getContext("2d"),u={labels:t,datasets:[{label:"Weight in grams",data:i,backgroundColor:"#3c8dbc"}]},f=document.getElementById("chart1").getContext("2d"),o=new Chart(f,{type:"bar",data:u,options:{scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Products"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]},legend:{display:!1}}})}function l(){for(var n="#",t=0;t<6;t++)n+="0123456789ABCDEF"[Math.floor(Math.random()*16)];return n}var r=[],t=[],i=[],u,f,o=null,s=["January","February","March","April","May","June","July","August","September","October","November","December"];angular.module("app-dashboard",[]);angular.module("app-dashboard").controller("chartsController",["$scope","$http",h])}