function user_dashboard(t){"use strict";function a(a,o){a.isBusyChart1=!0,o.get("/api/"+t+"/product_info").then(function(t){a.data=t.data;for(var r=0;r<a.data.length;r++)d.push(a.data[r]);a.isBusyChart1=!1,n()},function(){a.chart1Error="Unable to display chart"}),a.isBusyChart2=!0,o.get("/api/"+t+"/product_info_month_wise").then(function(t){var n,o,d,u;for(a.data=t.data,d=0;d<a.data.length;d++)l.push(a.data[d]);for(n=l.length>=6?l.length-6:0,o=l.length,d=0;d<l.length;d++)u=new Date(l[d].date),s.push(i[u.getMonth()]+" "+u.getFullYear());c(l),a.products=h,a.chart3ProductName=h[0],a.chart3StartDate=s[n],a.chart3EndDate=s[o-1],a.chart2StartDate=s[n],a.chart2EndDate=s[o-1],a.chart2Dates=s,a.isBusyChart2=!1,a.chart2Error=e(a.chart2StartDate,a.chart2EndDate),a.chart3Error=r(a.chart3ProductName,a.chart3StartDate,a.chart3EndDate)},function(){a.chart2Error="Unable to display chart"}),a.displayChart2=function(){a.chart2Error=e(a.chart2StartDate,a.chart2EndDate)},a.displayChart3=function(){a.chart3Error=r(a.chart3ProductName,a.chart3StartDate,a.chart3EndDate)}}function r(t,a,r){var e,n,o,c,d,h,i,u;if(a==r)return"Start month and end month must not have same value";for(h=0;h<s.length;h++)s[h]===a?n=h:s[h]===r&&(e=h);if(n>e)return"Start month must come before end month";for(o=[],h=n;h<=e;h++)o.push(s[h]);for(c=[],h=0;h<l.length;h++){for(d=0;d<l[h].productInformation.length;d++)if(l[h].productInformation[d].productName==t){c.push(l[h].productInformation[d].totalWeight);break}d==l[h].productInformation.length&&c.push(0)}c=c.slice(n,e+1);var p=[{label:t,data:c,backgroundColor:"#f7ab40",borderWidth:5,borderColor:"#d68413"}],f={labels:o,datasets:p};return $("#chart3div").empty(),$("#chart3div").append('<canvas id="chart3" height=400></canvas>'),i=document.getElementById("chart3").getContext("2d"),u=new Chart(i,{type:"line",data:f,options:{scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Products"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]},legend:{display:!1,labels:{display:!1}}}}),""}function e(t,a){function r(t){if(Array.isArray(t)){for(var a=0,r=Array(t.length);a<t.length;a++)r[a]=t[a];return r}return Array.from(t)}var e,n,c,d,h,i,u;if(t==a)return"Start month and end month must not have same value";for(c=0;c<s.length;c++)s[c]===t?n=c:s[c]===a&&(e=c);if(n>e)return"Start month must come before end month";var p=function(t){return[].concat(r(new Set(t)))},f=function(t){return[].concat.apply([],t)},m=l.map(function(t){return t.date}),g=p(f(l.map(function(t){return t.productInformation})).map(function(t){return t.productName})),y=g.map(function(t){return{label:t,data:m.map(function(a){var r=l.find(function(t){return t.date===a}).productInformation.find(function(a){return a.productName===t});return r?r.totalWeight:0}).slice(n,e+1),backgroundColor:o()}}),b=[];for(c=n;c<=e;c++)b.push(s[c]);return d={labels:b,datasets:y},h={responsive:!0,legend:{display:!0,position:"top"},scales:{xAxes:[{display:!0,stacked:!0,scaleLabel:{display:!0,labelString:"Months"}}],yAxes:[{display:!0,stacked:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]}},$("#chart2div").empty(),$("#chart2div").append('<canvas id="chart2" height=400></canvas>'),i=document.getElementById("chart2").getContext("2d"),u=new Chart(i,{type:"bar",data:d,options:h}),""}function n(){for(var t=[],a=[],r=0;r<d.length;r++)t.push(d[r].productName),a.push(d[r].totalWeight);var e=($("#chart1").get(0).getContext("2d"),{labels:t,datasets:[{label:"Weight in grams",data:a,backgroundColor:"#3c8dbc"}]}),n=document.getElementById("chart1").getContext("2d");new Chart(n,{type:"bar",data:e,options:{scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Products"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Weight In Grams"}}]},legend:{display:!1}}})}function o(){for(var t="#",a=0;a<6;a++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}function c(t){for(var a,r=0,e=0;e<t.length;e++)t[e].productInformation.length>r&&(r=t[e].productInformation.length,a=e);for(e=0;e<r;e++)h.push(t[a].productInformation[e].productName)}var d=[],l=[],s=[],h=[],i=["January","February","March","April","May","June","July","August","September","October","November","December"];angular.module("app-dashboard",[]),angular.module("app-dashboard").controller("chartsController",["$scope","$http",a])}